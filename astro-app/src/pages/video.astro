---
import Card from "../components/Card.astro";
import Layout from "../layouts/Layout.astro";
import { getTastes } from "../utils/sanity";
import { getFullVideo } from '../utils/sanity';

const tastes = await getTastes();
const fullVideo = await getFullVideo();
---

<Layout title="Video - ION Break">
  <section>
    <svg style="position: absolute; width: 0; height: 0;" aria-hidden="true">
      <defs>
        <clipPath id="videoClip" clipPathUnits="objectBoundingBox">
          <polygon points="0.0911,0.0203 0.1064,0.0959 0.1064,0.2275 0.0911,0.2901 0.0911,0.3657 0.1064,0.4732 0.1028,0.5905 0.0775,0.7786 0.0522,0.8877 0.1318,0.9584 0.2537,0.9681 0.3476,0.9423 0.4633,0.8989 0.7056,0.9122 0.8081,0.9507 0.8683,1 0.9479,0.9294 0.9177,0.8480 0.9225,0.4326 0.9033,0.2077 0.9177,0.1371 0.8911,0 0.8236,0.0278 0.7045,0.0407 0.6419,0.0578 0.5371,0.0429 0.4600,0.0600 0.4600,0 0.3805,0 0.3178,0.0343 0.2010,0.0450 0.1203,0"/>
        </clipPath>
      </defs>
    </svg>

    <div id="video-container">
      <div id="video-wrapper">
        {fullVideo && (fullVideo.videoFile || fullVideo.videoUrl) && (
          <video
            id="full-video"
            autoplay
            loop
            muted
            playsinline
            poster={fullVideo.posterImage}
          >
            <source src={fullVideo.videoUrl || fullVideo.videoFile} type="video/mp4" />
          </video>
        )}
      </div>

      <div id="video-frame-container">
        <img
          src="/img/Player_Frame.png"
          alt="Player Frame"
          id="video-frame"
        />
      </div>
    </div>
  </section>
</Layout>

<style>
  #video-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    height: 75dvh;
  }

  #video-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-52%, -50%);
    height: 69%;
    width: auto;
  }

  #full-video {
    height: 100%;
    width: auto;
    clip-path: url(#videoClip);
  }

  #video-frame-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    height: 100%;
    pointer-events: none;
  }

  #video-frame {
    height: 100%;
    width: auto;
  }
</style>